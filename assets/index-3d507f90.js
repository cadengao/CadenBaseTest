import{d as k,a7 as C,r as B,$ as D,c as j,u as g,x as h,G as l,X as t,l as e,v as I,M as N,L as E,k as L,w as b,I as $,D as w}from"./vue-d1dc6859.js";import{I as y,n as q,T,_ as R,u as M,B as x}from"./index-f19e9f59.js";import{g as _}from"./time-3f8879de.js";import{D as V,h as z}from"./head-4b2bbeab.js";import{R as c,C as i}from"./index-a094170e.js";import{F as u,a as G}from"./index-ee211a97.js";import{S as J,O as P}from"./index-85c70665.js";import"./index-87692f3f.js";import"./chevron-up-9416238e.js";import"./index-56063370.js";const X=k({__name:"set-from",setup(U,{expose:m}){const d=[{value:"1",label:"social recruitment"},{value:"2",label:"scholl recruitment"},{value:"3",label:"Job transfer"}],a=C({filterOptions:{},department:"",position:[],type:[],date:[],during:"",startTime:"",endTime:""}),p=B(),{t:O}=D(),r={required:!0,trigger:"blur"},f={required:!0,message:"必选",trigger:"blur"},v=j(()=>({department:[r],position:[r],type:[f],date:[r],during:[r],startTime:[r],endTime:[r]})),S=()=>{var s,F;const n=(s=a.filterOptions.startTime)==null?void 0:s.getTime();((F=a.filterOptions.endTime)==null?void 0:F.getTime())<n&&(a.filterOptions.endTime="",T.message({message:O("userInfo.time.message"),status:"error"}))};return m({setData:()=>a,setFormValid:()=>{let n=!1;return p.value.validate(o=>{n=o}),n},setReset:()=>{a.filterOptions={}}}),(n,o)=>(g(),h(t(q),null,{default:l(()=>[e(t(G),{ref_key:"setFormRef",ref:p,model:a.filterOptions,rules:v.value,"label-width":"150px","label-align":!0,"label-position":"left",size:"small"},{default:l(()=>[e(t(c),{flex:!0,justify:"left"},{default:l(()=>[e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.department"),prop:"department"},{default:l(()=>[e(t(y),{modelValue:a.filterOptions.department,"onUpdate:modelValue":o[0]||(o[0]=s=>a.filterOptions.department=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.position"),prop:"position"},{default:l(()=>[e(t(y),{modelValue:a.filterOptions.position,"onUpdate:modelValue":o[1]||(o[1]=s=>a.filterOptions.position=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(t(c),{flex:!0,justify:"left"},{default:l(()=>[e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.type"),prop:"type"},{default:l(()=>[e(t(J),{modelValue:a.filterOptions.type,"onUpdate:modelValue":o[2]||(o[2]=s=>a.filterOptions.type=s),placeholder:n.$t("baseForm.form.label.placeholder")},{default:l(()=>[(g(!0),I(E,null,N(d,s=>(g(),h(t(P),{key:s.value,label:n.$t(s.label),value:s.label},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.date"),prop:"date"},{default:l(()=>[e(t(V),{modelValue:a.filterOptions.date,"onUpdate:modelValue":o[3]||(o[3]=s=>a.filterOptions.date=s),"unlink-panels":"",type:"daterange","range-separator":"-","start-placeholder":n.$t("userSetting.first"),"end-placeholder":n.$t("userSetting.last")},null,8,["modelValue","start-placeholder","end-placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),e(t(c),{flex:!0,justify:"left"},{default:l(()=>[e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.during"),prop:"during"},{default:l(()=>[e(t(y),{modelValue:a.filterOptions.during,"onUpdate:modelValue":o[4]||(o[4]=s=>a.filterOptions.during=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.startTime"),prop:"startTime"},{default:l(()=>[e(t(V),{modelValue:a.filterOptions.startTime,"onUpdate:modelValue":o[5]||(o[5]=s=>a.filterOptions.startTime=s),onBlur:S},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),e(t(c),{flex:!0,justify:"left"},{default:l(()=>[e(t(i),{span:5,"label-width":"100px"},{default:l(()=>[e(t(u),{label:n.$t("userSetting.endTime"),prop:"endTime"},{default:l(()=>[e(t(V),{modelValue:a.filterOptions.endTime,"onUpdate:modelValue":o[6]||(o[6]=s=>a.filterOptions.endTime=s),onBlur:S},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1}))}});const Y=R(X,[["__scopeId","data-v-0e48261b"]]),A={class:"container-set"},H={class:"general-card"},K={class:"general-top"},Q={class:"general-contain"},W={class:"general-btn"},Z=k({__name:"index",setup(U){const{t:m}=D(),d=B(),a=M();function p(){d.value.setReset()}async function O(){let r=d.value.setData();if(d.value.setFormValid()){let f={department:r.filterOptions.department,job:r.filterOptions.position,employeeType:r.filterOptions.type,probationStart:_(r.filterOptions.date[0]),probationEnd:_(r.filterOptions.date[1]),probationDuration:r.filterOptions.during,protocolStart:_(r.filterOptions.startTime),protocolEnd:_(r.filterOptions.endTime)};await a.updateInfo(f),T.message({message:m("baseForm.form.submit.success"),status:"success"}),p()}else T.message({message:m("baseForm.form.submit.error"),status:"error"})}return(r,f)=>{const v=L("Breadcrumb");return g(),I("div",A,[e(v,{items:["menu.user","menu.user.setting"]}),b("div",H,[b("div",K,[e(z)]),b("div",Q,[e(Y,{ref_key:"setFormRef",ref:d},null,512),b("div",W,[e(t(x),{type:"primary","native-type":"submit",onClick:O},{default:l(()=>[$(w(r.$t("userSetting.save")),1)]),_:1}),e(t(x),{onClick:p},{default:l(()=>[$(w(r.$t("userSetting.cancel")),1)]),_:1})])])])])}}});const fe=R(Z,[["__scopeId","data-v-1616658a"]]);export{fe as default};
