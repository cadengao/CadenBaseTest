import{d as M,$ as j,r as v,a7 as G,c as L,u as F,v as S,w as n,D as u,l as t,G as l,X as e,I as y,a8 as Q,k as ee,x as N,y as Y,L as te,A as ae}from"./vue-d1dc6859.js";import{I as R,B as x,T as z,_ as U}from"./index-f19e9f59.js";import{R as k,C as $,P as le,a as E,G as ne}from"./index-a094170e.js";import"./index-8cf1f462.js";import{G as se}from"./index-4cc2b951.js";import{s as oe}from"./time-3f8879de.js";import{H as q}from"./hwcClient.service-2f5afc68.js";import{F as V,a as W}from"./index-ee211a97.js";import"./chevron-up-9416238e.js";import"./index-56063370.js";import"./index-85c70665.js";import"./index-87692f3f.js";import"./warning-triangle-6e5c6afb.js";import"./index-3092d7f5.js";const ue={class:"container-edit"},ie={class:"contain"},re={class:"tip"},de=M({__name:"index",props:{init:{}},emits:["myclick","mycancel"],setup(D,{expose:b,emit:h}){const{t:m}=j(),_=v(),f=D,r=(o,s,C)=>{/^([a-zA-Z0-9]|[\u4e00-\u9fa5])([a-zA-Z0-9._:()（）、：\/-]|[\u4e00-\u9fa5]){2,254}$/.test(s)?(_.value.password!==""&&_.value.validateField("password"),C(void 0)):C(new Error(m("menu.cloud.tip")))};let d=G({name:f.init.name,customer:f.init.customer,description:f.init.description}),g=v(!0);const c=L(()=>({name:[{required:!0,message:m("menu.cloud.delpass"),trigger:"blur"},{validator:r,trigger:"blur"}],customer:[{required:!1,trigger:"blur"}],description:[{required:!1,trigger:"change"}]})),w=h,I=()=>d,A=()=>{w("mycancel")},p=()=>{_.value.validate(o=>{o?(G({username:d.name}),z.message({message:m("menu.cloud.editpass"),status:"success"}),w("myclick")):z.message({message:m("login.form.registerError"),status:"warning"})})};return b({resultData:I}),(o,s)=>(F(),S("div",ue,[n("h3",null,u(o.$t("menu.cloud.edit")),1),n("div",ie,[t(e(W),{ref_key:"ruleForm",ref:_,model:e(d),rules:c.value,"validate-on-rule-change":e(g),"label-align":!0,"label-position":"left","label-width":"110px"},{default:l(()=>[t(e(k),{flex:!0},{default:l(()=>[t(e($),null,{default:l(()=>[t(e(V),{label:o.$t("menu.cloud.name"),prop:"name"},{default:l(()=>[n("div",null,[t(e(R),{modelValue:e(d).name,"onUpdate:modelValue":s[0]||(s[0]=C=>e(d).name=C)},null,8,["modelValue"]),n("div",re,u(o.$t("menu.cloud.tip")),1)])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(k),{flex:!0},{default:l(()=>[t(e($),null,{default:l(()=>[t(e(V),{label:o.$t("menu.cloud.customer"),prop:"customer"},{default:l(()=>[t(e(R),{modelValue:e(d).customer,"onUpdate:modelValue":s[1]||(s[1]=C=>e(d).customer=C)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(k),{flex:!0},{default:l(()=>[t(e($),null,{default:l(()=>[t(e(V),{label:o.$t("menu.cloud.description"),prop:"description"},{default:l(()=>[t(e(R),{modelValue:e(d).description,"onUpdate:modelValue":s[2]||(s[2]=C=>e(d).description=C),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(k),{flex:!0},{default:l(()=>[t(e($),null,{default:l(()=>[t(e(V),{class:"btn"},{default:l(()=>[t(e(x),{type:"primary",onClick:p},{default:l(()=>[y(u(o.$t("menu.cloud.sure")),1)]),_:1}),t(e(x),{onClick:A},{default:l(()=>[y(u(o.$t("menu.cloud.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","validate-on-rule-change"])])]))}});const ce=U(de,[["__scopeId","data-v-bb007481"]]),me={class:"container-create"},pe={class:"contain"},fe={class:"tip"},ge=M({__name:"index",emits:["myclick","mycancel"],setup(D,{expose:b,emit:h}){const{t:m}=j(),_=v(),f=(p,o,s)=>{/^([a-zA-Z0-9]|[\u4e00-\u9fa5])([a-zA-Z0-9._:()（）、：\/-]|[\u4e00-\u9fa5]){2,254}$/.test(o)?(_.value.password!==""&&_.value.validateField("password"),s(void 0)):s(new Error(m("menu.cloud.tip")))};let r=G({name:"",customer:"",description:""}),d=v(!0);const g=L(()=>({name:[{required:!0,message:m("menu.cloud.verification"),trigger:"blur"},{validator:f,trigger:"blur"}],customer:[{required:!1,trigger:"blur"}],description:[{required:!1,trigger:"change"}]})),c=h,w=()=>r,I=()=>{c("mycancel")},A=()=>{_.value.validate(p=>{p?(G({username:r.name}),z.message({message:m("login.form.registerPass"),status:"success"}),c("myclick")):z.message({message:m("login.form.registerError"),status:"warning"})})};return b({resultData:w}),(p,o)=>(F(),S("div",me,[n("h3",null,u(p.$t("menu.cloud.create")),1),n("div",pe,[t(e(W),{ref_key:"ruleForm",ref:_,model:e(r),rules:g.value,"validate-on-rule-change":e(d),"label-align":!0,"label-position":"left","label-width":"110px"},{default:l(()=>[t(e(k),{flex:!0},{default:l(()=>[t(e($),null,{default:l(()=>[t(e(V),{label:p.$t("menu.cloud.name"),prop:"name"},{default:l(()=>[n("div",null,[t(e(R),{modelValue:e(r).name,"onUpdate:modelValue":o[0]||(o[0]=s=>e(r).name=s)},null,8,["modelValue"]),n("div",fe,u(p.$t("menu.cloud.tip")),1)])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(k),{flex:!0},{default:l(()=>[t(e($),null,{default:l(()=>[t(e(V),{label:p.$t("menu.cloud.customer"),prop:"customer"},{default:l(()=>[t(e(R),{modelValue:e(r).customer,"onUpdate:modelValue":o[1]||(o[1]=s=>e(r).customer=s)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(k),{flex:!0},{default:l(()=>[t(e($),null,{default:l(()=>[t(e(V),{label:p.$t("menu.cloud.description"),prop:"description"},{default:l(()=>[t(e(R),{modelValue:e(r).description,"onUpdate:modelValue":o[2]||(o[2]=s=>e(r).description=s),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),t(e(k),{flex:!0},{default:l(()=>[t(e($),null,{default:l(()=>[t(e(V),{class:"btn"},{default:l(()=>[t(e(x),{type:"primary",onClick:A},{default:l(()=>[y(u(p.$t("menu.cloud.sure")),1)]),_:1}),t(e(x),{onClick:I},{default:l(()=>[y(u(p.$t("menu.cloud.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","validate-on-rule-change"])])]))}});const ve=U(ge,[["__scopeId","data-v-a2c95e32"]]),_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAhCAYAAAC1ONkWAAADmklEQVRYR82X3WscZRTGzzN9d6qVVkt3lqCiImiEWlpbrcSixAtBvRBmlhZvIg0limlQaP+B9A9QsGrFIFHUC6XsjHqhF960+NFarUZooe2FxFYk7Gy1H1Zl9s37yGy2km1ms/ORat+rYeac5/zmcM6ZM5CCh9y6TAcH9ojISEuKMqG8wXFg/2wRaRRxjn2jWvldERm6Quc9u9p4poh2ITAdONuM4YdJABawTXnh/rxwucH4cf9KPXv2BCk3JwUH5Fe1Gv14NPwjD1xusKZfeYk0uxYLClgvl7z67v8MjJ/0rdVaT5GiFgcTrZTagKdmjmeFy5WxZs05SOEjaYIBOFjywsE0tvNtMoPpoDJkjIk7seMAaBU6ya1XPrMsa0i59fezwGUC4+d33qgvXDxBYV8nlZwpueHt8T0dOKdJubXz7TGjVq28B4/9dD4tXCawpu+8QvKFBeLAlO2F97Xmmu/8IOSGhIzuLXnhi0sORr+yXtMcpciyXGAiswrWJnj1H9PApcoYSWi/8gWFWxJFU2Qs9oPgK+XVHwbAXnCpwLTvDBtysqtYSrDY37IwrNzwncJgDO64SZtLpyh0lgIMQF3hhn640+cWnYG9yHXgvG4MRxe1y5Cxdtb2KTfcmRuMtfJGLfItRaylBIOIUSIPoNr4vptu1xqbK3jnEEUe7JVVyZixuUaQb5QXDnRrhK5g2i+PGMpET6hWlN5zLEnHEhlR1cZbSc8SwejfskZLdJLkmqsJBuCsWrH8bjz+y28LBnJS4MivTAjN3Kqc5uTMWFt6wq42nusJFgV9m0F9mIzLIOUpABY3Ai01YLszR+ZH6whOjlvN4LUjQtmUEumy2Wm72mh9xKNa+WcRuS2TP+RoyR3bDIyby34dYFFQeV6M2ZdJtG0M4LP4kuQTefzFskZtt/7GAjB+2ufov/VJUlbnEi7oBMjv6jrVjydnwvY4mVOMfGdSyOG8+hCJWhkTsfNqCDBpe+GOf8GaH1UeEmO+zFTw86JD8Jeyl98lEaElir+r1+eBA+L3sraUvPohxH/SzeDAd0nLXWrxAl25IAYwVXIH74cOnO3G8O3UEMmGx+1q4952Vx4TkbVF9OLVCE3f+ZrkQBEhiMwCeDbeBGn4ZuKWmyEAgMMx2CWSKzL4XXVTAH8iqpWnRaQ1HK+ZA0wjCpwxMXz1moGKQSxrtDX5tV9+msSYgOtIWfV/QAJyUQTHINyrvMYH/wCqlqCjKgTtawAAAABJRU5ErkJggg==",ye={class:"container-del"},Ce={class:"contain"},be={class:"contain-main"},he={class:"title"},we={class:"btn"},Ae=M({__name:"index",props:{init:Object},emits:["myclick","mycancel"],setup(D,{emit:b}){const{t:h}=j(),m=v(""),_=D,f=b,r=()=>{f("mycancel")},d=()=>{m.value.trim()==="DELETE"?(z.message({message:h("menu.cloud.delpass"),status:"success"}),f("myclick")):z.message({message:h("login.form.registerError"),status:"warning"})};return(g,c)=>(F(),S("div",ye,[n("h3",null,u(g.$t("menu.cloud.del")),1),n("div",Ce,[c[3]||(c[3]=n("img",{src:_e,alt:"deleted"},null,-1)),n("div",be,[n("div",null,[y(u(g.$t("menu.cloud.askDel"))+" ",1),n("b",null,u(g.$t("menu.cloud.askContracts")),1),c[1]||(c[1]=y("？ "))]),n("div",he,u(g.$t("menu.contracts.name"))+" "+u(_.init.name),1),n("div",null,[y(u(g.$t("menu.cloud.askInput"))+" ",1),c[2]||(c[2]=n("span",{class:"del"},"DELETE",-1)),y(" "+u(g.$t("menu.cloud.askSure")),1)]),t(e(R),{modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=w=>m.value=w)},null,8,["modelValue"]),n("div",we,[t(e(x),{type:"danger",onClick:d},{default:l(()=>[y(u(g.$t("menu.cloud.sure")),1)]),_:1}),t(e(x),{onClick:r},{default:l(()=>[y(u(g.$t("menu.cloud.cancel")),1)]),_:1})])])])]))}});const ke=U(Ae,[["__scopeId","data-v-2fa667e7"]]),$e={class:"container-contracts"},Ve={class:"contracts-card"},Ie={class:"btn"},Ee={class:"operation"},Fe=["onClick"],Ge=["onClick"],Re={key:0},xe=M({__name:"index",setup(D){const b=G({loading:!1,filterOptions:{}}),h=G({component:le,attrs:{currentPage:1,pageSize:10,pageSizes:[10,20],total:10,layout:"total, prev, pager, next, jumper, sizes"}}),m=v(!0),{loading:_}=Q(b),f=v(!1),r=v(),d=v(""),g=v(),c=v(),w=v(),I=v(),A=v("536"),p={apigName:"apig_contract",apigGroupName:"group_contract"};async function o(a){const i=await q.apiRequest("getContracts",a,p);return i==null?void 0:i.data}async function s(a){b.loading=!0;try{I.value=await o(a);let i=(a.pageIndex-1)*a.pageSize;return{result:I.value.sort(oe("updatedAt")).slice(i,i+a.pageSize),page:{total:I.value.length}}}finally{m.value=!0,b.loading=!1}}async function C(a){return q.apiRequest("delContract",a,p)}async function X(a){return q.apiRequest("editContract",a,p)}async function P(a){return q.apiRequest("addContract",a,p)}const K=G({api:({page:a})=>{const{currentPage:i,pageSize:T}=a;return s({pageIndex:i,pageSize:T,query:"",field:"name"})}}),O=(a,i)=>{c.value=i,d.value=a,f.value=!f.value,a==="edit"?(r.value=ce,A.value="536"):a==="deletes"?(r.value=ke,A.value="369"):(r.value=ve,A.value="536")};async function H(){if(f.value=!1,m.value=!1,d.value==="edit"){const a=g.value.resultData(),i={id:c.value.id,name:a.name,customer:a.customer,description:a.description};await X(i),s({pageIndex:1,pageSize:10,query:"",field:"name"})}if(d.value==="deletes"){const a={id:c.value.id};await C(a),s({pageIndex:1,pageSize:10,query:"",field:"name"})}if(d.value==="create"){const a=g.value.resultData(),i={name:a.name,customer:a.customer,description:a.description};await P(i),s({pageIndex:1,pageSize:10,query:"",field:"name"})}}const Z=()=>{f.value=!1};return(a,i)=>{const T=ee("Breadcrumb");return F(),S(te,null,[t(T,{items:["menu.cloud","menu.cloud.contracts"]}),n("div",$e,[n("div",Ve,[m.value?(F(),N(e(ne),{key:0,ref:w.value,"fetch-data":K,"auto-load":!0,pager:h,loading:e(_),size:"medium","auto-resize":!0},{toolbar:l(()=>[t(e(se),null,{buttons:l(B=>[n("div",Ie,[n("span",null,u(a.$t("menu.cloud.contracts")),1),t(e(x),{type:"primary",onClick:J=>O("create",B.row)},{default:l(()=>[y(u(a.$t("menu.cloud.create")),1)]),_:2},1032,["onClick"])])]),_:1})]),default:l(()=>[t(e(E),{type:"index",width:"40"}),t(e(E),{field:"name",title:a.$t("menu.cloud.name"),align:"center",sortable:""},null,8,["title"]),t(e(E),{field:"id",title:a.$t("menu.cloud.id"),align:"center"},null,8,["title"]),t(e(E),{field:"customer",title:a.$t("menu.cloud.customer"),align:"center"},null,8,["title"]),t(e(E),{field:"description",title:a.$t("menu.cloud.description"),align:"center"},null,8,["title"]),t(e(E),{field:"updatedAt",title:a.$t("menu.cloud.updatedAt"),align:"center",sortable:""},null,8,["title"]),t(e(E),{title:a.$t("searchTable.columns.operations"),align:"center"},{default:l(B=>[n("span",Ee,[n("a",{onClick:J=>O("edit",B.row)},u(a.$t("menu.cloud.editOpa")),9,Fe),i[1]||(i[1]=y("   ")),n("a",{onClick:J=>O("deletes",B.row)},u(a.$t("menu.cloud.editDel")),9,Ge)])]),_:1},8,["title"])]),_:1},8,["fetch-data","pager","loading"])):Y("",!0)])]),f.value?(F(),S("div",Re,[t(e(z),{modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=B=>f.value=B),"lock-scroll":!1,"show-header":!1,"show-footer":!1,type:"confirm","mask-closable":"true",height:A.value,width:"589",onConfirm:H,onClose:Z},{default:l(()=>[(F(),N(ae(r.value),{ref_key:"content",ref:g,init:c.value,onMyclick:H,onMycancel:Z},null,40,["init"]))]),_:1},8,["modelValue","height"])])):Y("",!0)],64)}}});const Ne=U(xe,[["__scopeId","data-v-19a1fa63"]]);export{Ne as default};
